<!DOCTYPE html>
<html>
<head>
  <title>Sadzzad Chatbot</title>
  <script src="https://cdn.jsdelivr.net/npm/@xenova/transformers@2.0.4/dist/transformers.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; max-width: 600px; }
    #chatbox { border: 1px solid #ddd; height: 300px; padding: 10px; overflow-y: scroll; }
    .message { margin: 8px 0; }
    .user { color: #0366d6; }
    .bot { color: #22863a; }
    input, button { font-size: 1rem; padding: 8px; margin-top: 10px; }
  </style>
</head>
<body>
  <h2>Sadzzad Chatbot</h2>
  <div id="chatbox"></div>
  <input id="user-input" placeholder="Ask me anything‚Ä¶" style="width: 80%;">
  <button onclick="sendMessage()">Send</button>

  <script>
    let generator;

    window.onload = async function () {
      try {
        // Wait for Transformers.js to be ready
        generator = await window.transformers.pipeline('text-generation', {
          model: 'sadzzadisking/chatbot_1233',
          modelFormat: 'onnx',
          tokenizer: 'sadzzadisking/chatbot_1233',
        });
        appendMessage('bot', 'ü§ñ Chatbot is ready!');
      } catch (err) {
        console.error("Model load error:", err);
        appendMessage('bot', '‚ùå Failed to load model.');
      }
    };

    function appendMessage(sender, text) {
      const e = document.createElement('div');
      e.className = `message ${sender}`;
      e.textContent = `${sender.toUpperCase()}: ${text}`;
      document.getElementById('chatbox').appendChild(e);
      document.getElementById('chatbox').scrollTop = 1e9;
    }

    async function sendMessage() {
      const input = document.getElementById('user-input').value.trim();
      if (!input || !generator) return;
      appendMessage('user', input);
      document.getElementById('user-input').value = '';

      try {
        const out = await generator(input, {
          max_new_tokens: 50,
          return_full_text: false
        });
        appendMessage('bot', out[0].generated_text);
      } catch (e) {
        console.error(e);
        appendMessage('bot', '‚ùóÔ∏è Error generating response.');
      }
    }
  </script>
</body>
</html>
